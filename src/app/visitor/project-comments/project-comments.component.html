<div class="container">
    <div class="row align-items-start">
        <div class="col-lg-7">
            <div class="comments-section">
                <div>
                    <h3 class="section-title">التعليقات</h3>
                    <div class="row align-items-center g-3">
                        <div class="col">
                            <div class="position-relative">
                                <textarea class="form-control" placeholder="أكتب تعليق"
                                    [(ngModel)]="reviewObject.reviewComment"></textarea>
                                <button class="btn btn-primary btn-add-comment" (click)="addReview()">أضف</button>
                            </div>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-outline-secondary" (click)="toggleComments()"> {{showComments ?
                                'إخفاء التعليقات' : 'إظهار التعليقات'}} </button>
                        </div>
                    </div>
                </div>

                <div *ngIf="showComments" class="mt-5">
                    <h3 class="section-title">({{reviews.length}} تعليقات)</h3>
                    <div *ngFor="let review of reviews" class="card comment-card">
                        <div class="flex-shrink-0">
                            <img src="assets/images/default-profile-img.svg" class="commenter-img" />
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <div class="commenter-name">{{ review?.Visitor.FullName }}</div>
                            <div class="comment-date"> {{ review?.CreatedDate | date:'longDate' }}</div>
                            <div class="comment">{{ review?.ReviewComment}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-5">
            <div class="rating-section">
                <div class="d-flex justify-content-between align-items-start">
                    <h3 class="section-title">التقييم</h3>
                    <div class="total-ratings">
                        <span class="rating-value">{{ averageRateWithoutDecimal }}</span>
                        <span class="number-of-rating">(من {{reviews.length}} تقييم)</span>
                    </div>
                </div>

                <div class="rating-stars rating-stars-{{isUserRated ? reviewObject.rate : averageRateWithoutDecimal }}">
                    <a (click)="rateProject(1)" class="rating-star"></a>
                    <a (click)="rateProject(2)" class="rating-star"></a>
                    <a (click)="rateProject(3)" class="rating-star"></a>
                    <a (click)="rateProject(4)" class="rating-star"></a>
                    <a (click)="rateProject(5)" class="rating-star"></a>
                </div>
            </div>
        </div>
    </div>
</div>