"use strict";(self.webpackChunksdb=self.webpackChunksdb||[]).push([["default-src_app_core_components_activity_activity_component_ts-src_app_core_components_add-br-75a07f"],{8283:(O,C,i)=>{i.d(C,{y:()=>n});var e=i(7587),s=i(7232);let n=(()=>{class o{constructor(){this.editable=!1}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-activity"]],inputs:{projectInfo:"projectInfo",editable:"editable"},decls:26,vars:19,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","g-3","gy-4"],[1,"col-sm-6"],[1,"form-label"],["disabled","",1,"form-control",3,"value"]],template:function(t,d){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"div",4)(12,"label",5),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"div",4)(17,"label",5),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",6),e.qZA(),e.TgZ(21,"div",4)(22,"label",5),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",6),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,9,"activity_info")),e.xp6(5),e.Oqu(e.lcZ(9,11,"activity_type")),e.xp6(2),e.Q6J("value","\u0645\u0646\u0634\u0622\u062a"),e.xp6(3),e.Oqu(e.lcZ(14,13,"activity_classification")),e.xp6(2),e.Q6J("value",d.projectInfo.activityAr),e.xp6(3),e.Oqu(e.lcZ(19,15,"main_activity")),e.xp6(2),e.Q6J("value",d.projectInfo.categoryAr),e.xp6(3),e.Oqu(e.lcZ(24,17,"sub_activity")),e.xp6(2),e.Q6J("value",d.projectInfo.subCategoryAr))},dependencies:[s.X$]}),o})()},6500:(O,C,i)=>{i.d(C,{n:()=>h});class e{constructor(){this.nameAr="",this.nameEn="",this.longitude="",this.latitude="",this.isMainStore=!1,this.storeTypeId=1,this.region="",this.city="",this.district="",this.icon="",this.contactNumber="",this.isDeliverable=!1}}var s=i(5890);class n{constructor(){this.Id=0,this.projectId=0,this.projectNameAr="",this.projectNameEn="",this.district="",this.city="",this.neighborhood="",this.category="",this.activity="",this.icon="",this.subCategory="",this.longitude="",this.latitude="",this.status="",this.description="",this.storeTypeId=1,this.contactNumber="",this.isDeliverable=!1,this.isMainStore=!1}}var o=i(7587),m=i(2921),t=i(2588),d=i(8386),p=i(9305),v=i(3075),b=i(2652),M=i(2085),f=i(7232);let h=(()=>{class u{constructor(c,r,a,l){this.route=c,this.branchService=r,this.userService=a,this.requestService=l,this.newBranch=new n,this.address="",this.requestAvailable=!1,this.branchRequestUpdate=new e,this.currentRequest=new s.c,this.route.params.subscribe(g=>this.projectId=g.projectId)}ngOnInit(){this.getCurrentRequest()}getCurrentRequest(){this.requestService.getProjectOpenRequests(this.projectId).subscribe(c=>{0==c.Rows.length?this.requestAvailable=!1:(this.currentRequest=c.Rows[0],this.requestAvailable=!0)})}setAddress(c){console.log(c),this.address=c,this.newBranch.longitude=this.address.split(",")[1],this.newBranch.latitude=this.address.split(",")[0],console.log(this.newBranch)}saveChanges(){this.validateBranch(),this.newBranch.longitude=this.address.split(",")[1],this.newBranch.latitude=this.address.split(",")[0],this.newBranch.projectNameEn=this.newBranch.projectNameAr,"ADMIN"==this.userService.getUserRole()&&(this.newBranch.isMainStore=!0,this.newBranch.projectId=this.projectId,this.branchService.addBranch(this.newBranch).subscribe(c=>{window.location.href="/admin/projects/"+this.projectId,console.log(c)})),"CLIENT"==this.userService.getUserRole()&&(this.newBranch.isMainStore=!1,this.newBranch.projectId=16646,this.newBranch.Id=null,this.requestAvailable?this.createBranchRequest():this.createUpdateRequest())}createUpdateRequest(){this.requestService.createProjectUpdateRequest(this.projectId).subscribe(c=>{this.currentRequest=c,this.createBranchRequest()})}createBranchRequest(){this.branchRequestUpdate.longitude=this.newBranch.longitude,this.branchRequestUpdate.latitude=this.newBranch.latitude,this.branchRequestUpdate.nameAr=this.newBranch.projectNameAr,this.branchRequestUpdate.contactNumber=this.newBranch.contactNumber,this.branchRequestUpdate.isDeliverable=this.newBranch.isDeliverable,this.branchRequestUpdate.isMainStore=this.newBranch.isMainStore,this.requestService.createBranchRequest(this.currentRequest.RelatedProjectVersionId,this.branchRequestUpdate).subscribe(c=>{window.location.href="/client/profile"})}cancelChanges(){window.location.href="/client/profile"}setDeliveryOption(c){this.newBranch.isDeliverable=c}validateBranch(){}}return u.\u0275fac=function(c){return new(c||u)(o.Y36(m.gz),o.Y36(t.b),o.Y36(d.K),o.Y36(p.s))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-add-branch"]],decls:46,vars:21,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"partner-map"],[3,"locationSet"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"media-card","align-items-center"],[1,"flex-grow-1"],[1,"flex-shrink-0","ms-3"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","option1",1,"form-check-input",3,"change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","option2",1,"form-check-input",3,"change"],["for","inlineRadio2",1,"form-check-label"],[3,"saveChanges","cancelChanges"]],template:function(c,r){1&c&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._uU(3,"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0631\u0639"),o.qZA(),o.TgZ(4,"div")(5,"div",3)(6,"label",4),o._uU(7,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0631\u0639"),o.qZA(),o.TgZ(8,"input",5),o.NdJ("ngModelChange",function(l){return r.address=l}),o.qZA()(),o.TgZ(9,"div",6)(10,"app-creation-map",7),o.NdJ("locationSet",function(l){return r.setAddress(l)}),o.qZA()(),o.TgZ(11,"div",3)(12,"label",4),o._uU(13,"\u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639"),o.qZA(),o.TgZ(14,"input",5),o.NdJ("ngModelChange",function(l){return r.newBranch.projectNameAr=l}),o.qZA()()()()(),o.TgZ(15,"div",0)(16,"div",1)(17,"div",2),o._uU(18),o.ALo(19,"translate"),o.qZA(),o.TgZ(20,"div",3)(21,"label",4),o._uU(22),o.ALo(23,"translate"),o.qZA(),o.TgZ(24,"input",8),o.NdJ("ngModelChange",function(l){return r.newBranch.contactNumber=l}),o.ALo(25,"translate"),o.qZA()()()(),o.TgZ(26,"div",0)(27,"div",1)(28,"div",2),o._uU(29),o.ALo(30,"translate"),o.qZA(),o.TgZ(31,"div",9)(32,"div",10),o._uU(33," \u0645\u062a\u0627\u062d \u0645\u0639 \u0628\u0631\u0627\u0645\u062c \u0627\u0644\u062a\u0648\u0635\u064a\u0644 "),o.qZA(),o.TgZ(34,"div",11)(35,"div",12)(36,"input",13),o.NdJ("change",function(){return r.setDeliveryOption(!0)}),o.qZA(),o.TgZ(37,"label",14),o._uU(38),o.ALo(39,"translate"),o.qZA()(),o.TgZ(40,"div",12)(41,"input",15),o.NdJ("change",function(){return r.setDeliveryOption(!1)}),o.qZA(),o.TgZ(42,"label",16),o._uU(43),o.ALo(44,"translate"),o.qZA()()()()()(),o.TgZ(45,"app-page-action-buttons",17),o.NdJ("saveChanges",function(){return r.saveChanges()})("cancelChanges",function(){return r.cancelChanges()}),o.qZA()),2&c&&(o.xp6(8),o.Q6J("ngModel",r.address),o.xp6(6),o.Q6J("ngModel",r.newBranch.projectNameAr),o.xp6(4),o.Oqu(o.lcZ(19,9,"admin_pages.pos_page.contacts")),o.xp6(4),o.Oqu(o.lcZ(23,11,"admin_pages.pos_page.contact_number")),o.xp6(2),o.s9C("placeholder",o.lcZ(25,13,"admin_pages.pos_page.contact_number_placeholder")),o.Q6J("ngModel",r.newBranch.contactNumber),o.xp6(5),o.Oqu(o.lcZ(30,15,"delivery_options")),o.xp6(9),o.Oqu(o.lcZ(39,17,"global.available")),o.xp6(5),o.Oqu(o.lcZ(44,19,"global.not_available")))},dependencies:[v.Fj,v.JJ,v.On,b.l,M.L,f.X$],styles:["[_nghost-%COMP%]  .map-container{height:200px!important}"]}),u})()},459:(O,C,i)=>{i.d(C,{t:()=>u});var e=i(5890),s=i(8557),n=i(7587),o=i(8386),m=i(9305),t=i(5349),d=i(1188),p=i(7480),v=i(9808),b=i(7232);function M(_,c){if(1&_){const r=n.EpF();n.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),n._UZ(4,"span",11),n.qZA()(),n.TgZ(5,"div",12),n.NdJ("click",function(){const g=n.CHM(r).$implicit,A=n.oxw(2);return n.KtG(A.openAttachment(g.Url))}),n._uU(6),n.qZA(),n.TgZ(7,"div",9)(8,"div",13),n.NdJ("click",function(){const l=n.CHM(r),g=l.$implicit,A=l.index,P=n.oxw(2);return n.KtG(P.deleteAttachment(g,A))}),n._UZ(9,"span",14),n.qZA()()()()}if(2&_){const r=c.$implicit;n.xp6(6),n.hij(" ",r.Name," ")}}function f(_,c){if(1&_&&(n.TgZ(0,"div"),n.YNc(1,M,10,1,"div",6),n.qZA()),2&_){const r=n.oxw();n.xp6(1),n.Q6J("ngForOf",r.attachmentList)}}function h(_,c){if(1&_){const r=n.EpF();n.TgZ(0,"div",7)(1,"input",15),n.NdJ("change",function(l){n.CHM(r);const g=n.oxw();return n.KtG(g.uploadFile(l))}),n.qZA(),n.TgZ(2,"label",16)(3,"div",17)(4,"div",9)(5,"div",10),n._UZ(6,"span",18),n.qZA()(),n.TgZ(7,"div",19),n._uU(8),n.ALo(9,"translate"),n.ALo(10,"translate"),n.qZA()()()()}2&_&&(n.xp6(8),n.AsE(" ",n.lcZ(9,2,"client_pages.company_profile_page.add_new_attachment")," ( ",n.lcZ(10,4,"client_pages.company_profile_page.attachment_requirements")," ) "))}let u=(()=>{class _{constructor(r,a,l,g,A){this.userService=r,this.requestService=a,this.fileUploadService=l,this.projectService=g,this.attachmentService=A,this.currentRole="",this.currentRequest=new e.c,this.requestAvailable=!1,this.addedFiles=[],this.attachmentList=[],this.attachments=[],this.currentRole=this.userService.getUserRole()}ngOnInit(){this.getCurrentRequest()}getCurrentRequest(){this.requestService.getProjectOpenRequests(this.projectInfo.projectId).subscribe(r=>{0==r.Rows.length?(this.requestAvailable=!1,this.attachments=this.projectInfo.attachments,this.prepareExternalAttachmentsList()):(this.currentRequest=r.Rows[0],this.requestAvailable=!0,this.getRequestAttachments())})}getRequestAttachments(){this.attachmentService.getRequestAttachments(this.currentRequest.RelatedProjectVersionId).subscribe(r=>{this.attachments=r,this.prepareExternalAttachmentsList()})}prepareExternalAttachmentsList(){this.attachmentList=[],this.projectInfo&&this.attachments&&(this.attachmentList=this.attachments.filter(r=>r.IsExternal))}updateDescription(r){console.log(r.target.value)}uploadFile(r){const a=r.target.files;!a||!a.length||this.fileUploadService.uploadFile(a).subscribe({next:l=>{l&&("CLIENT"===this.currentRole?this.createProjectAttachmentsForClientUser(l,a):this.createProjectAttachmentsForAdminUser(l,a[0]))},error:l=>console.log(l)})}createProjectAttachmentsForClientUser(r,a){this.requestAvailable?this.createProjectAttachment(r,a):this.createUpdateRequest(r,a)}createUpdateRequest(r,a){this.requestService.createProjectUpdateRequest(this.projectInfo.projectId).subscribe(l=>{this.currentRequest=l,this.createProjectAttachment(l,a)})}createProjectAttachment(r,a){const l=new s.p;l.url=r,l.fileType=a?a[0].type:"",l.isExternal=!0,l.name=a?a[0].name:"",this.requestService.createAttachmentRequest(this.currentRequest.RelatedProjectVersionId,l).subscribe(g=>{console.log(g)})}createProjectAttachmentsForAdminUser(r,a){let l=this.prepareProjectFilesArray(a,r);this.projectService.uploadProjectFiles(this.projectInfo.projectId,l).subscribe(g=>{g&&this.refreshProjectAttachments()})}prepareProjectFilesArray(r,a){const l=new s.p;return l.isExternal=!0,l.name=r.name,l.fileType=r.type,l.url=a,[l]}refreshProjectAttachments(){this.projectService.getProject(this.projectInfo.projectId).subscribe(r=>{this.projectInfo=r,this.prepareExternalAttachmentsList()})}deleteAttachment(r,a){this.requestAvailable?this.requestService.deleteAttachment(this.currentRequest.RelatedProjectVersionId,r.Id).subscribe(l=>{this.attachmentList.splice(a,1)}):this.createUpdateRequestForDelete(r,a)}createUpdateRequestForDelete(r,a){this.requestService.createProjectUpdateRequest(this.projectInfo.projectId).subscribe(l=>{this.currentRequest=l,this.requestAvailable=!0,this.deleteAttachment(r,a)})}openAttachment(r){window.open(r)}}return _.\u0275fac=function(r){return new(r||_)(n.Y36(o.K),n.Y36(m.s),n.Y36(t.I),n.Y36(d.Y),n.Y36(p.L))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-attachments"]],inputs:{projectInfo:"projectInfo",editable:"editable"},decls:8,vars:5,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","g-3"],[4,"ngIf"],["class","col-sm-6",4,"ngIf"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"col-sm-6"],[1,"media-card","align-items-center"],[1,"flex-shrink-0"],[1,"media-icon"],[1,"icon-pdf"],[1,"flex-grow-1","ms-3",3,"click"],[1,"btn","btn-danger","delete-icon-btn",3,"click"],[1,"icon-delete"],["type","file","id","new-attachment",3,"change"],["for","new-attachment"],[1,"media-card","align-items-center","add-new-item"],[1,"icon-add"],[1,"flex-grow-1","ms-3"]],template:function(r,a){1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"div",3),n.YNc(6,f,2,1,"div",4),n.YNc(7,h,11,6,"div",5),n.qZA()()()),2&r&&(n.xp6(3),n.Oqu(n.lcZ(4,3,"client_pages.company_profile_page.attachments")),n.xp6(3),n.Q6J("ngIf","VISITOR"!==a.currentRole),n.xp6(1),n.Q6J("ngIf","VISITOR"!==a.currentRole))},dependencies:[v.sg,v.O5,b.X$],styles:[".media-card[_ngcontent-%COMP%]{cursor:pointer}.media-card[_ngcontent-%COMP%]   .media-icon[_ngcontent-%COMP%]{font-size:2rem}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),_})()},4520:(O,C,i)=>{i.d(C,{U:()=>M});var e=i(7587),s=i(2921),n=i(2588),o=i(3075),m=i(9808),t=i(2085);function d(f,h){if(1&f){const u=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._uU(3,"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0631\u0639"),e.qZA(),e.TgZ(4,"div")(5,"div",4)(6,"label",5),e._uU(7,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0631\u0639"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(c){e.CHM(u);const r=e.oxw();return e.KtG(r.branchInfo.longitude+","+(r.branchInfo.latitude=c))}),e.qZA()(),e.TgZ(9,"div",7),e._UZ(10,"app-creation-map",8),e.qZA(),e.TgZ(11,"div",4)(12,"label",5),e._uU(13,"\u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(c){e.CHM(u);const r=e.oxw();return e.KtG(r.branchInfo.projectNameAr=c)}),e.qZA()()()()()}if(2&f){const u=e.oxw();e.xp6(8),e.Q6J("ngModel",u.branchInfo.longitude+","+u.branchInfo.latitude)("disabled",!u.editable),e.xp6(2),e.Q6J("lat",u.branchInfo.latitude)("lng",u.branchInfo.longitude),e.xp6(4),e.Q6J("ngModel",u.branchInfo.projectNameAr)("disabled",!u.editable)}}let p=(()=>{class f{constructor(){this.nameTitle=""}ngOnInit(){console.log(this.branchInfo)}updateBranchInfo(){}}return f.\u0275fac=function(u){return new(u||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-branch-info"]],inputs:{branchInfo:"branchInfo",nameTitle:"nameTitle",editable:"editable"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"partner-map"],[3,"lat","lng"]],template:function(u,_){1&u&&e.YNc(0,d,15,6,"div",0),2&u&&e.Q6J("ngIf",_.branchInfo)},dependencies:[o.Fj,o.JJ,o.On,m.O5,t.L],styles:["[_nghost-%COMP%]  .map-container{height:200px!important}"]}),f})();var v=i(7232);function b(f,h){if(1&f){const u=e.EpF();e.TgZ(0,"div"),e._UZ(1,"app-branch-info",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5)(8,"label",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(c){e.CHM(u);const r=e.oxw();return e.KtG(r.branchDetails.contactNumber=c)}),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"div",2)(14,"div",3)(15,"div",4),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",8)(19,"div",9),e._uU(20," \u0645\u062a\u0627\u062d \u0645\u0639 \u0628\u0631\u0627\u0645\u062c \u0627\u0644\u062a\u0648\u0635\u064a\u0644 "),e.qZA(),e.TgZ(21,"div",10)(22,"div",11),e._UZ(23,"input",12),e.TgZ(24,"label",13),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",11),e._UZ(28,"input",14),e.TgZ(29,"label",15),e._uU(30),e.ALo(31,"translate"),e.qZA()()()()()()()}if(2&f){const u=e.oxw();e.xp6(1),e.Q6J("branchInfo",u.branchDetails),e.xp6(4),e.Oqu(e.lcZ(6,10,"admin_pages.pos_page.contacts")),e.xp6(4),e.Oqu(e.lcZ(10,12,"admin_pages.pos_page.contact_number")),e.xp6(2),e.s9C("placeholder",e.lcZ(12,14,"admin_pages.pos_page.contact_number_placeholder")),e.Q6J("ngModel",u.branchDetails.contactNumber),e.xp6(5),e.Oqu(e.lcZ(17,16,"delivery_options")),e.xp6(7),e.Q6J("checked",u.branchDetails.isDeliverable),e.xp6(2),e.Oqu(e.lcZ(26,18,"global.available")),e.xp6(3),e.Q6J("checked",!u.branchDetails.isDeliverable),e.xp6(2),e.Oqu(e.lcZ(31,20,"global.not_available"))}}let M=(()=>{class f{constructor(u,_){this.route=u,this.branchService=_,this.route.params.subscribe(c=>this.branchId=c.id)}ngOnInit(){this.getBranchById()}getBranchById(){this.branchService.getBranchById(this.branchId).subscribe(u=>{this.branchDetails=u})}}return f.\u0275fac=function(u){return new(u||f)(e.Y36(s.gz),e.Y36(n.b))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-branch-details"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"branchInfo"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"media-card","align-items-center"],[1,"flex-grow-1"],[1,"flex-shrink-0","ms-3"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","option1",1,"form-check-input",3,"checked"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","option2",1,"form-check-input",3,"checked"],["for","inlineRadio2",1,"form-check-label"]],template:function(u,_){1&u&&e.YNc(0,b,32,22,"div",0),2&u&&e.Q6J("ngIf",_.branchDetails)},dependencies:[o.Fj,o.JJ,o.On,m.O5,p,v.X$],styles:["[_nghost-%COMP%]  .map-container{height:200px!important}"]}),f})()},3758:(O,C,i)=>{i.d(C,{I:()=>v});var e=i(7587),s=i(8386),n=i(2921),o=i(2588),m=i(9808),t=i(7232);const d=function(b){return[b]};function p(b,M){if(1&b){const f=e.EpF();e.TgZ(0,"div",5)(1,"div",11)(2,"div",12)(3,"div",8),e._UZ(4,"span",13),e.qZA()(),e.TgZ(5,"div",14),e._uU(6),e.qZA(),e.TgZ(7,"div",7)(8,"div",15),e.NdJ("click",function(){const u=e.CHM(f),_=u.$implicit,c=u.index,r=e.oxw();return e.KtG(r.deleteBranch(_,c))}),e._UZ(9,"span",16),e.qZA()()()()}if(2&b){const f=M.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(3,d,"/client/branches/"+f.Id)),e.xp6(3),e.Q6J("routerLink",e.VKq(5,d,"/client/branches/"+f.Id)),e.xp6(1),e.hij(" ",f.projectNameAr," ")}}let v=(()=>{class b{constructor(f,h,u){var _;this.userService=f,this.route=h,this.branchService=u,this.route.params.subscribe(c=>this.projectId=c.id),this.projectId=null===(_=this.project)||void 0===_?void 0:_.projectId}ngOnInit(){this.currentRole=this.userService.getUserRole()}deleteBranch(f,h){this.branchService.deleteBranch(f.Id).subscribe(),this.project.branches.splice(h,1)}}return b.\u0275fac=function(f){return new(f||b)(e.Y36(s.K),e.Y36(n.gz),e.Y36(o.b))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-branches"]],inputs:{project:"project",editable:"editable"},decls:15,vars:10,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","g-3"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6"],[1,"media-card","align-items-center","add-new-item",3,"routerLink"],[1,"flex-shrink-0"],[1,"media-icon"],[1,"icon-add"],[1,"flex-grow-1","ms-3"],[1,"media-card","align-items-center"],[1,"flex-shrink-0",3,"routerLink"],[1,"icon-pos"],[1,"flex-grow-1","ms-3",3,"routerLink"],[1,"btn","btn-danger","delete-icon-btn",3,"click"],[1,"icon-delete"]],template:function(f,h){1&f&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,p,10,7,"div",4),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"i",9),e.qZA()(),e.TgZ(12,"div",10),e._uU(13),e.ALo(14,"translate"),e.qZA()()()()()()),2&f&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"branches")),e.xp6(3),e.Q6J("ngForOf",h.project.branches),e.xp6(2),e.Q6J("routerLink",e.VKq(8,d,"ADMIN"===h.currentRole?"/admin/projects/"+h.project.projectId+"/add-branch":"/client/projects/"+h.project.projectId+"/add-branch")),e.xp6(5),e.hij(" ",e.lcZ(14,6,"client_pages.company_profile_page.add_new_branch")," "))},dependencies:[m.sg,n.rH,t.X$],styles:[".media-card[_ngcontent-%COMP%]   .media-icon[_ngcontent-%COMP%]{font-size:2rem}"]}),b})()},3858:(O,C,i)=>{i.d(C,{V:()=>_});var e=i(8557),s=i(5890),n=i(7587),o=i(9353),m=i(2340),t=i(5349),d=i(1188),p=i(9305),v=i(8386),b=i(7480),M=i(3075),f=i(9808),h=i(7232);function u(c,r){if(1&c){const a=n.EpF();n.TgZ(0,"div",6)(1,"div",7),n._UZ(2,"img",8),n.TgZ(3,"button",19),n.NdJ("click",function(){const g=n.CHM(a),A=g.$implicit,P=g.index,T=n.oxw();return n.KtG(T.deleteAttachment(A,P))}),n._UZ(4,"span",10),n.qZA()()()}if(2&c){const a=r.$implicit,l=n.oxw();n.xp6(2),n.Q6J("src",l.host+"/"+a.Url,n.LSH)("alt","")}}let _=(()=>{class c{constructor(a,l,g,A,P){this.fileUploadService=a,this.projectService=l,this.requestService=g,this.userService=A,this.attachmentService=P,this.descriptionChanged=new n.vpe,this.oldDescription="",this.requestAvailable=!1,this.currentRequest=new s.c,this.attachments=[],this.host=m.N.hostUrl,this.imageAllowedExtensions=["jpeg","png","jpg"],this.brochourList=[]}ngOnInit(){this.getCurrentRequest(),this.oldDescription=this.projectInfo.descriptionAr}getCurrentRequest(){this.requestService.getProjectOpenRequests(this.projectInfo.projectId).subscribe(a=>{0==a.Rows.length?(this.requestAvailable=!1,this.attachments=this.projectInfo.attachments,this.prepareBrochourList()):(this.currentRequest=a.Rows[0],this.requestAvailable=!0,this.getRequestAttachments())})}getRequestAttachments(){this.attachmentService.getRequestAttachments(this.currentRequest.RelatedProjectVersionId).subscribe(a=>{this.attachments=a,this.prepareBrochourList()})}updateDescription(a){this.descriptionChanged.emit(a.target.value)}uploadFile(a){const l=a.target.files;!l||!l.length||!o.g.isValidFileExtension(l[0],this.imageAllowedExtensions)||this.fileUploadService.uploadFile(l).subscribe({next:g=>{g&&("CLIENT"==this.userService.getUserRole()?this.createProjectAttachmentsForClientUser(g,l):this.createProjectAttachmentsForAdminUser(g,l[0]))},error:g=>console.log(g)})}createProjectAttachmentsForClientUser(a,l){this.requestAvailable?this.createProjectAttachment(a,l):this.createUpdateRequest(a,l)}createProjectAttachmentsForAdminUser(a,l){let g=this.prepareProjectFilesArray(l,a);this.projectService.uploadProjectFiles(this.projectInfo.projectId,g).subscribe(A=>{A&&this.refreshProjectAttachments()})}createUpdateRequest(a,l){this.requestService.createProjectUpdateRequest(this.projectInfo.projectId).subscribe(g=>{this.currentRequest=g,this.createProjectAttachment(g,l)})}createProjectAttachment(a,l){const g=new e.p;g.url=a,g.fileType=l?l[0].type:"",g.isBrochour=!0,g.name=l?l[0].name:"",this.requestService.createAttachmentRequest(this.currentRequest.RelatedProjectVersionId,g).subscribe(A=>{console.log(A)})}prepareProjectFilesArray(a,l){const g=new e.p;return g.isBrochour=!0,g.name=a.name,g.fileType=a.type,g.url=l,[g]}refreshProjectAttachments(){this.projectService.getProject(this.projectInfo.projectId).subscribe(a=>{this.projectInfo=a,this.prepareBrochourList()})}prepareBrochourList(){this.brochourList=[],this.attachments&&this.attachments.length>0&&(this.brochourList=this.attachments.filter(a=>a.IsBrochour))}deleteAttachment(a,l){this.requestAvailable?this.requestService.deleteAttachment(this.currentRequest.RelatedProjectVersionId,a.Id).subscribe(g=>{this.brochourList.splice(l,1)}):this.createUpdateRequestForDelete(a,l)}createUpdateRequestForDelete(a,l){this.requestService.createProjectUpdateRequest(this.projectInfo.projectId).subscribe(g=>{this.currentRequest=g,this.requestAvailable=!0,this.deleteAttachment(a,l)})}}return c.\u0275fac=function(a){return new(a||c)(n.Y36(t.I),n.Y36(d.Y),n.Y36(p.s),n.Y36(v.K),n.Y36(b.L))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-company-info"]],inputs:{projectInfo:"projectInfo",editable:"editable"},outputs:{descriptionChanged:"descriptionChanged"},decls:34,vars:20,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-4"],[1,"form-label"],[1,"row"],[1,"col-md-4","col-sm-6"],[1,"project-img-wrapper"],[3,"src","alt"],[1,"btn","btn-danger","delete-icon-btn"],[1,"icon-delete"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],["type","file","id","upload-photo","accept","image/png, image/jpeg, image/jpg",3,"change"],["for","upload-photo",1,"add-new-img"],[1,"wrapper"],[1,"icon-add"],[1,"mb-3"],["type","text","disabled","",1,"form-control",3,"value"],["type","text",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"btn","btn-danger","delete-icon-btn",3,"click"]],template:function(a,l){1&a&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"div",3)(6,"label",4),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"div",5)(10,"div",6)(11,"div",7),n._UZ(12,"img",8),n.TgZ(13,"button",9),n._UZ(14,"span",10),n.qZA()()(),n.YNc(15,u,5,2,"div",11),n.TgZ(16,"div",6)(17,"input",12),n.NdJ("change",function(A){return l.uploadFile(A)}),n.qZA(),n.TgZ(18,"label",13)(19,"div",14),n._UZ(20,"span",15),n._uU(21),n.ALo(22,"translate"),n.qZA()()()()(),n.TgZ(23,"div")(24,"div",16)(25,"label",4),n._uU(26),n.ALo(27,"translate"),n.qZA(),n._UZ(28,"input",17),n.qZA(),n.TgZ(29,"div",16)(30,"label",4),n._uU(31),n.ALo(32,"translate"),n.qZA(),n.TgZ(33,"input",18),n.NdJ("ngModelChange",function(A){return l.projectInfo.descriptionAr=A})("input",function(A){return l.updateDescription(A)}),n.qZA()()()()()),2&a&&(n.xp6(3),n.Oqu(n.lcZ(4,10,"client_pages.company_profile_page.main_info")),n.xp6(4),n.Oqu(n.lcZ(8,12,"client_pages.company_profile_page.project_images")),n.xp6(5),n.Q6J("src",l.projectInfo.logoUrl,n.LSH)("alt",""),n.xp6(3),n.Q6J("ngForOf",l.brochourList),n.xp6(6),n.hij(" ",n.lcZ(22,14,"global.add_new_image")," "),n.xp6(5),n.Oqu(n.lcZ(27,16,"client_pages.company_profile_page.project_name")),n.xp6(2),n.Q6J("value",l.projectInfo.nameAr),n.xp6(3),n.Oqu(n.lcZ(32,18,"client_pages.company_profile_page.project_brief")),n.xp6(2),n.Q6J("ngModel",l.projectInfo.descriptionAr))},dependencies:[M.Fj,M.JJ,M.On,f.sg,h.X$],styles:["[_nghost-%COMP%]   .project-img-wrapper[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:1px solid #eef2f3;height:100%;display:flex;justify-content:center;align-items:center;position:relative}[_nghost-%COMP%]   .project-img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75%;max-height:150px}[_nghost-%COMP%]   .project-img-wrapper[_ngcontent-%COMP%]   .delete-icon-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem}[dir=ltr]   [_nghost-%COMP%]   .project-img-wrapper[_ngcontent-%COMP%]   .delete-icon-btn[_ngcontent-%COMP%]{left:auto;right:.5rem}[_nghost-%COMP%]   .add-new-img[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:solid 1px #eef2f3;height:100%;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .add-new-img[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:1rem;border:3px solid #eef2f3;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   .add-new-img[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{font-size:3rem;color:#a2b3be;margin-bottom:.5rem}[_nghost-%COMP%]   input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),c})()},1920:(O,C,i)=>{i.d(C,{O:()=>o});var e=i(7587),s=i(3075),n=i(7232);let o=(()=>{class m{constructor(){this.contactsUpdated=new e.vpe}ngOnInit(){this.editable=!1}toggleEdit(){this.editable=!this.editable}updateProject(){this.contactsUpdated.emit()}}return m.\u0275fac=function(d){return new(d||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-contacts"]],inputs:{projectInfo:"projectInfo",editable:"editable"},outputs:{contactsUpdated:"contactsUpdated"},decls:39,vars:12,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col"],[1,"col","text-end"],[1,"edit-link",3,"click"],[1,"row","g-3"],[1,"col-sm-6"],[1,"media-card","align-items-center"],[1,"flex-shrink-0"],[1,"media-icon"],[1,"icon-phone"],[1,"flex-grow-1","ms-3"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"icon-earth"],[1,"icon-twitter"],[1,"icon-instagram"]],template:function(d,p){1&d&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5)(8,"a",6),e.NdJ("click",function(){return p.toggleEdit()}),e._uU(9),e.qZA()()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),e._UZ(15,"span",12),e.qZA()(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(b){return p.projectInfo.contactNumber=b})("ngModelChange",function(){return p.updateProject()}),e.qZA()()()(),e.TgZ(18,"div",8)(19,"div",9)(20,"div",10)(21,"div",11),e._UZ(22,"span",15),e.qZA()(),e.TgZ(23,"div",13)(24,"input",14),e.NdJ("ngModelChange",function(b){return p.projectInfo.siteUrl=b})("ngModelChange",function(){return p.updateProject()}),e.qZA()()()(),e.TgZ(25,"div",8)(26,"div",9)(27,"div",10)(28,"div",11),e._UZ(29,"span",16),e.qZA()(),e.TgZ(30,"div",13)(31,"input",14),e.NdJ("ngModelChange",function(b){return p.projectInfo.twitter=b})("ngModelChange",function(){return p.updateProject()}),e.qZA()()()(),e.TgZ(32,"div",8)(33,"div",9)(34,"div",10)(35,"div",11),e._UZ(36,"span",17),e.qZA()(),e.TgZ(37,"div",13)(38,"input",14),e.NdJ("ngModelChange",function(b){return p.projectInfo.instagram=b})("ngModelChange",function(){return p.updateProject()}),e.qZA()()()()()()()),2&d&&(e.xp6(5),e.Oqu(e.lcZ(6,10,"client_pages.company_profile_page.contact_channels")),e.xp6(4),e.Oqu(p.editable?"\u0627\u0644\u063a\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"),e.xp6(8),e.Q6J("ngModel",p.projectInfo.contactNumber)("disabled",!p.editable),e.xp6(7),e.Q6J("ngModel",p.projectInfo.siteUrl)("disabled",!p.editable),e.xp6(7),e.Q6J("ngModel",p.projectInfo.twitter)("disabled",!p.editable),e.xp6(7),e.Q6J("ngModel",p.projectInfo.instagram)("disabled",!p.editable))},dependencies:[s.Fj,s.JJ,s.On,n.X$],styles:[".media-card[_ngcontent-%COMP%]   .media-icon[_ngcontent-%COMP%]{background:#19aec8;color:#fff;border-radius:50%}"]}),m})()},2085:(O,C,i)=>{i.d(C,{L:()=>b});var e=i(7587),s=i(4004),n=i(262),o=i(9646),m=i(520),t=i(9808),d=i(3315);function p(M,f){if(1&M&&e._UZ(0,"map-marker",3),2&M){const h=e.oxw(2);e.Q6J("position",h.markerPosition)}}function v(M,f){if(1&M){const h=e.EpF();e.TgZ(0,"div")(1,"google-map",1),e.NdJ("mapClick",function(_){e.CHM(h);const c=e.oxw();return e.KtG(c.addMarker(_))}),e.YNc(2,p,1,1,"map-marker",2),e.qZA()()}if(2&M){const h=e.oxw();e.xp6(1),e.Q6J("center",h.currentLocation)("options",h.options),e.xp6(1),e.Q6J("ngIf",h.markerPosition)}}let b=(()=>{class M{constructor(h){this.httpClient=h,this.locationSet=new e.vpe,this.currentLocation={lat:24.65,lng:46.71},this.KSA_BOUNDS={north:32.186356,south:16.343458,west:34.959348,east:55.671963},this.options={center:{lat:24.65,lng:46.71},zoom:8,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"}]}],restriction:{latLngBounds:this.KSA_BOUNDS,strictBounds:!1},gestureHandling:"cooperative",region:"SA"},this.apiLoaded=h.jsonp("https://maps.googleapis.com/maps/api/js?key=AIzaSyBmRo1F-upNGcqaavKjk4hJE3GA-z4K37M&region=SA","callback").pipe((0,s.U)(()=>!0),(0,n.K)(()=>(0,o.of)(!1)))}ngOnInit(){console.log(this.lat),console.log(this.lng),navigator.geolocation.getCurrentPosition(h=>{this.currentLocation={lat:h.coords.latitude,lng:h.coords.longitude}}),this.lat&&this.lng&&(this.markerPosition={lat:Number(this.lat),lng:Number(this.lng)}),this.options.center=this.currentLocation}addMarker(h){var u;this.markerPosition=null===(u=h.latLng)||void 0===u?void 0:u.toJSON(),console.log(this.markerPosition),this.locationSet.emit(this.markerPosition.lat+","+this.markerPosition.lng)}}return M.\u0275fac=function(h){return new(h||M)(e.Y36(m.eN))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-creation-map"]],inputs:{lng:"lng",lat:"lat"},outputs:{locationSet:"locationSet"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"center","options","mapClick"],[3,"position",4,"ngIf"],[3,"position"]],template:function(h,u){1&h&&(e.YNc(0,v,3,3,"div",0),e.ALo(1,"async")),2&h&&e.Q6J("ngIf",e.lcZ(1,1,u.apiLoaded))},dependencies:[t.O5,d.b6,d.O_,t.Ov],styles:["[_nghost-%COMP%] {position:relative}[_nghost-%COMP%]  .map-container{width:100%!important;margin:1.5rem 0;border-radius:.75rem}[_nghost-%COMP%]  .cluster div{color:#fff!important}"]}),M})()},3945:(O,C,i)=>{i.d(C,{p:()=>h});var e=i(7587),s=i(2855),n=i(8182),o=i(2588),m=i(5377),t=i(8464),d=i(3075),p=i(9808),v=i(3056),b=i(4180),M=i(3815);function f(u,_){if(1&u){const c=e.EpF();e.TgZ(0,"app-advanced-search",11),e.NdJ("filteredBranchesUpdated",function(a){e.CHM(c);const l=e.oxw();return e.KtG(l.updateFilteredBranches(a))})("districtSelected",function(a){e.CHM(c);const l=e.oxw();return e.KtG(l.updateDistrict(a))})("citySelected",function(a){e.CHM(c);const l=e.oxw();return e.KtG(l.updateCity(a))})("closeAdvancedSearch",function(){e.CHM(c);const a=e.oxw();return e.KtG(a.toggleAdvancedSearch())}),e.qZA()}}let h=(()=>{class u{constructor(c,r,a,l,g){this.categoryService=c,this.activityService=r,this.branchService=a,this.cityService=l,this.districtService=g,this.selectedActivities=[],this.activitySelectedValues=[],this.selectedCategories=[],this.categorySelectedValues=[],this.selectedSubCategories=[],this.subCategorySelectedValues=[],this.allBranches=this.branchService.getAllBranches(),this.filteredBranches=[],this.advancedSearch=!1,this.districts=[],this.districtDropdownSettings={singleSelection:!0,idField:"nameAr",textField:"nameAr",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0,searchPlaceholderText:"\u0628\u062d\u062b"},this.districtSelectedValues=[],this.cityLocation={lat:24.742394,lng:46.741473,zoom:11.5},this.districtLocation={lat:24.742394,lng:46.741473,zoom:8},this.cities=[],this.selectedCities=[],this.citiesDropdownSettings={singleSelection:!0,idField:"nameAr",textField:"nameAr",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0,searchPlaceholderText:"\u0628\u062d\u062b"},this.citySelectedValues=[]}ngOnInit(){this.filteredBranches=this.allBranches,this.cities=this.cityService.getCities(),this.districts=this.districtService.getDistricts(),this.setActivitiesList()}ngAfterViewInit(){}setActivitiesList(){this.activities=this.activityService.getAllActivities(),this.activitySettings={singleSelection:!1,idField:"id",textField:"nameAr",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0,searchPlaceholderText:"\u0628\u062d\u062b"}}onActivitySelect(c){this.selectedActivities.push(c.nameAr),this.mainCategories=[],this.mainCategories=this.categoryService.getCategoriesByActivity(this.selectedActivities),this.getBranchesByActivities(),this.initMainCategoriesDropdown(),this.categorySelectedValues=[],this.subCategorySelectedValues=[]}onActivityDeSelect(c){this.selectedActivities=this.selectedActivities.filter(r=>r!=c.nameAr),this.getBranchesByActivities(),this.mainCategories=[],this.mainCategories=this.categoryService.getCategoriesByActivity(this.selectedActivities),this.categorySelectedValues=[],this.subCategorySelectedValues=[]}initMainCategoriesDropdown(){this.categoriesSettings={singleSelection:!1,idField:"id",textField:"nameAr",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0,searchPlaceholderText:"\u0628\u062d\u062b"}}onMainCategorySelect(c){let r=this.categoryService.getCategoryByName(c.nameAr);r&&(this.selectedCategories.push(c.nameAr),this.subCategories=[],this.subCategories=this.subCategories.concat(r.subCategories)),this.getBranchesByCategories(),this.subCategorySelectedValues=[]}onMainCategoryDeSelect(c){this.selectedCategories=this.selectedCategories.filter(r=>r!=c.nameAr),console.log(this.selectedCategories),this.subCategories=[],this.subCategories=this.categoryService.getSubCategoriesByCategories(this.selectedCategories),this.getBranchesByCategories(),this.subCategorySelectedValues=[]}getBranchesByActivities(){this.filteredBranches=[],this.filteredBranches=this.branchService.getBranchesByActivities(this.selectedActivities)}getBranchesByCategories(){this.filteredBranches=[],this.filteredBranches=this.branchService.getBranchesByCategories(this.selectedCategories,this.selectedActivities)}toggleAdvancedSearch(){this.advancedSearch=!this.advancedSearch,this.advancedSearch?(this.activitySelectedValues=[],this.districtSelectedValues=[],this.citySelectedValues=[]):this.filteredBranches=this.allBranches}onDistrictSelect(c){this.getFilteredBranches(),this.filteredBranches=this.branchService.getBranchesByDistrict(c.nameAr,this.filteredBranches);let r=this.districtService.getDistrictByName(c.nameAr);this.cities=this.cityService.getCitiesByDistrict(r.nameAr),this.districtLocation={lat:Number(r.longitude),lng:Number(r.latitude),zoom:8}}onDistrictDeSelect(){this.cities=this.cityService.getCities(),this.getFilteredBranches()}getFilteredBranches(){this.filteredBranches=[],this.selectedActivities.length>0&&(this.filteredBranches=this.branchService.getBranchesByActivities(this.selectedActivities)),this.selectedCategories.length>0&&(this.filteredBranches=this.branchService.getBranchesByCategories(this.selectedCategories,this.selectedActivities)),this.selectedSubCategories.length>0&&(this.filteredBranches=this.branchService.getBranchesBySubCategories(this.selectedSubCategories,this.selectedCategories,this.selectedActivities)),0==this.filteredBranches.length&&(this.filteredBranches=this.allBranches)}onCitySelect(c){let r=this.cityService.getCityByName(c.nameAr);this.cityLocation={lat:Number(r.longitude),lng:Number(r.latitude),zoom:11.5}}updateFilteredBranches(c){this.filteredBranches=c}closeAdvancedSearch(){this.advancedSearch=!1}updateDistrict(c){this.districtLocation=c}updateCity(c){this.cityLocation=c}onDistrictStatisticsSelect(c){let r=this.districtService.getDistrictByName(c=c.target.value);this.selectedDistrictStatistics=r}}return u.\u0275fac=function(c){return new(c||u)(e.Y36(s.H),e.Y36(n.M),e.Y36(o.b),e.Y36(m.Z),e.Y36(t.R))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-interactive-map"]],decls:12,vars:19,consts:[[1,"card"],[1,"card-body","position-relative","p-0"],[3,"branches","districtLocation","cityLocation","selectedDistrict"],[1,"filter-section"],[1,"container","position-relative"],[1,"filter-dropdowns"],[3,"placeholder","settings","data","ngModel","onSelect","onDeSelect","click","ngModelChange"],[3,"placeholder","settings","data","ngModel","onSelect","onDeSelect","ngModelChange"],[3,"placeholder","settings","data","ngModel","onSelect","ngModelChange"],[1,"btn","advanced-search-btn",3,"ngClass","click"],[3,"filteredBranchesUpdated","districtSelected","citySelected","closeAdvancedSearch",4,"ngIf"],[3,"filteredBranchesUpdated","districtSelected","citySelected","closeAdvancedSearch"]],template:function(c,r){1&c&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-maps",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"ng-multiselect-dropdown",6),e.NdJ("onSelect",function(l){return r.onActivitySelect(l)})("onDeSelect",function(l){return r.onActivityDeSelect(l)})("click",function(){return r.closeAdvancedSearch()})("ngModelChange",function(l){return r.activitySelectedValues=l}),e.qZA(),e.TgZ(7,"ng-multiselect-dropdown",7),e.NdJ("onSelect",function(l){return r.onDistrictSelect(l)})("onDeSelect",function(){return r.onDistrictDeSelect()})("ngModelChange",function(l){return r.districtSelectedValues=l}),e.qZA(),e.TgZ(8,"ng-multiselect-dropdown",8),e.NdJ("onSelect",function(l){return r.onCitySelect(l)})("ngModelChange",function(l){return r.citySelectedValues=l}),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){return r.toggleAdvancedSearch()}),e._uU(10),e.qZA()(),e.YNc(11,f,1,0,"app-advanced-search",10),e.qZA()()()()),2&c&&(e.xp6(2),e.Q6J("branches",r.filteredBranches)("districtLocation",r.districtLocation)("cityLocation",r.cityLocation)("selectedDistrict",r.selectedDistrictStatistics),e.xp6(4),e.Q6J("placeholder","\u0646\u0634\u0627\u0637 \u0627\u0644\u0645\u0634\u0631\u0648\u0639")("settings",r.activitySettings)("data",r.activities)("ngModel",r.activitySelectedValues),e.xp6(1),e.Q6J("placeholder","\u0627\u0644\u0645\u0646\u0637\u0642\u0629")("settings",r.citiesDropdownSettings)("data",r.districts)("ngModel",r.districtSelectedValues),e.xp6(1),e.Q6J("placeholder","\u0627\u0644\u0645\u062f\u064a\u0646\u0629")("settings",r.citiesDropdownSettings)("data",r.cities)("ngModel",r.citySelectedValues),e.xp6(1),e.Q6J("ngClass",r.advancedSearch?"active":""),e.xp6(1),e.Oqu(r.advancedSearch?"\u0625\u063a\u0644\u0627\u0642":"\u0628\u062d\u062b \u0645\u062a\u0642\u062f\u0645"),e.xp6(1),e.Q6J("ngIf",r.advancedSearch))},dependencies:[d.JJ,d.On,p.mk,p.O5,v.OP,b.E,M.g],styles:["[_nghost-%COMP%] {position:relative;overflow:hidden;display:block}[_nghost-%COMP%]  .map-container{height:calc(100vh - 200px)!important;margin:0!important;border-radius:0!important}[_nghost-%COMP%]  .filter-section{position:absolute;top:4rem;width:100%;overflow-x:auto;overflow-y:hidden;padding:1rem 0}[_nghost-%COMP%]  .filter-section .filter-dropdowns{display:flex;justify-content:center;width:-moz-fit-content;width:fit-content;margin-inline:auto;margin-bottom:1.5rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown{width:200px;display:inline-block;margin-inline:.5rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn{border:0!important;border-radius:10px!important;background:#FFFFFF;box-shadow:0 5px 10px #0000001a;padding:10px!important;height:50px!important;line-height:30px!important;text-align:start!important;color:#a2b3be;font-weight:700;font-size:1rem;text-align:center!important}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn .dropdown-multiselect__caret{display:none!important}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn .selected-item-container{float:right!important}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item{white-space:nowrap;display:flex;justify-content:space-between;max-width:120px;border-color:#19acc8!important;background:#1badc8!important;border-radius:1rem 1rem 1rem 0!important;font-size:.85rem!important}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item:hover{box-shadow:none!important}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item a{margin-inline-start:.5rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .multiselect-dropdown .dropdown-btn:before{font-family:SDB-icon-font,sans-serif;content:\"\\e908\";color:#a2b3be;float:left;transform:rotate(90deg);font-size:12px;margin-top:6px}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list{position:relative;width:auto;min-width:300px;padding:0;box-shadow:0 7px 10px #29263208;border-radius:.5rem;border:0}@media screen and (max-width: 480px){[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list{min-width:calc(100vw - 1rem)}}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div{color:#17355a;font-weight:700}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div:before{width:1rem;height:1rem;border:1px solid #C7D1D8;border-radius:.25rem;top:.75rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div:after{width:.5rem;height:.25rem;border-width:0 0 2px 2px;top:.75rem;left:.25rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]:checked+div:before{background:#1AAEC8;border-color:#1aaec8}[dir=rtl]   [_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li{text-align:right}[dir=rtl]   [_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div{padding-left:inherit;padding-right:2rem}[dir=rtl]   [_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div:before{left:auto;right:0}[dir=rtl]   [_nghost-%COMP%]  .filter-section .filter-dropdowns ng-multiselect-dropdown .dropdown-list li input[type=checkbox]+div:after{left:auto;right:.25rem}[_nghost-%COMP%]  .filter-section .filter-dropdowns .advanced-search-btn{min-width:150px;height:50px;font-weight:700;box-shadow:0 5px 10px #0000001a;color:#a2b3be;background:#FFFFFF}[_nghost-%COMP%]  .filter-section .filter-dropdowns .advanced-search-btn:hover{color:#19acc8}[_nghost-%COMP%]  .filter-section .filter-dropdowns .advanced-search-btn.active{background:#19acc8;border-color:#19acc8;color:#fff}[_nghost-%COMP%]  .filter-section .filter-dropdowns .statistics-interactive-map-select.form-select{width:200px;display:inline-block;margin-inline:.5rem;border:0!important;border-radius:10px!important;background:#FFFFFF;box-shadow:0 5px 10px #0000001a;padding:10px!important;height:50px!important;line-height:30px!important;text-align:start!important;color:#a2b3be;font-weight:700;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m2 5 6 6 6-6'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:left 6px top .6rem!important;background-size:13px 26px!important;-webkit-appearance:none!important}"]}),u})()},6027:(O,C,i)=>{i.d(C,{n:()=>m});var e=i(7587),s=i(3075),n=i(2085),o=i(7232);let m=(()=>{class t{constructor(){this.locationChange=new e.vpe,this.location=""}ngOnInit(){this.location=this.project.latitude+","+this.project.longitute}updateLocation(p){this.location=p,this.locationChange.emit(this.location)}}return t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-location"]],inputs:{project:"project",editable:"editable"},outputs:{locationChange:"locationChange"},decls:11,vars:9,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[3,"lat","lng","locationSet"]],template:function(p,v){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(M){return v.location=M}),e.qZA(),e.TgZ(10,"app-creation-map",6),e.NdJ("locationSet",function(M){return v.updateLocation(M)}),e.qZA()()()()),2&p&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"client_pages.company_profile_page.company_location")),e.xp6(4),e.Oqu(e.lcZ(8,7,"client_pages.company_profile_page.company_location_on_map")),e.xp6(2),e.Q6J("ngModel",v.location),e.xp6(1),e.Q6J("lat",v.project.latitude)("lng",v.project.longitute))},dependencies:[s.Fj,s.JJ,s.On,n.L,o.X$],styles:["[_nghost-%COMP%]  .map-container{height:200px!important}"]}),t})()},2652:(O,C,i)=>{i.d(C,{l:()=>m});var e=i(7587),s=i(4766),n=i(7232);function o(t,d){if(1&t){const p=e.EpF();e.TgZ(0,"div",4)(1,"h4",5),e._uU(2,"\u062d\u0630\u0641 \u0627\u0644\u0634\u0631\u064a\u0643"),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){const M=e.CHM(p).$implicit;return e.KtG(M.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",7)(5,"p"),e._uU(6,"\u0639\u0632\u064a\u0632\u064a \u0645\u0646\u0633\u0648\u0628\u064a \u0627\u0644\u0627\u062f\u0627\u0631\u0629\u060c \u0633\u064a\u062a\u0645 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0634\u0631\u064a\u0643 \u0648\u0648\u0642\u0641 \u0627\u0644\u062a\u0639\u0627\u0648\u0646 \u0645\u0639\u0647"),e.qZA(),e.TgZ(7,"div")(8,"button",8),e._uU(9,"\u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0623\u0645\u0631"),e.qZA(),e.TgZ(10,"button",9),e._uU(11,"\u062d\u0630\u0641 \u0627\u0644\u0634\u0631\u064a\u0643"),e.qZA()()()}}let m=(()=>{class t{constructor(p){this.modalService=p,this.saveChanges=new e.vpe,this.cancelChanges=new e.vpe,this.saveTitle="\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a",this.cancelTitle="\u0625\u0644\u063a\u0627\u0621"}ngOnInit(){}save(){this.saveChanges.emit()}cancel(){this.cancelChanges.emit()}open(p){this.modalService.open(p,{ariaLabelledBy:"modal-basic-title",size:"lg",windowClass:"default-modal",centered:!0}).result.then(v=>{},v=>{})}}return t.\u0275fac=function(p){return new(p||t)(e.Y36(s.FF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-page-action-buttons"]],inputs:{saveTitle:"saveTitle",cancelTitle:"cancelTitle"},outputs:{saveChanges:"saveChanges",cancelChanges:"cancelChanges"},decls:9,vars:6,consts:[[1,"container"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],["confirmDeletion",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","text-center"],[1,"btn","btn-primary","me-3"],[1,"btn","btn-outline-secondary"]],template:function(p,v){1&p&&(e.TgZ(0,"div",0)(1,"a",1),e.NdJ("click",function(){return v.save()}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"a",2),e.NdJ("click",function(){return v.cancel()}),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.YNc(7,o,12,0,"ng-template",null,3,e.W1O)),2&p&&(e.xp6(2),e.Oqu(e.lcZ(3,2,v.saveTitle)),e.xp6(3),e.Oqu(e.lcZ(6,4,v.cancelTitle)))},dependencies:[n.X$],styles:["[_nghost-%COMP%]{position:fixed;right:0;left:0;bottom:0;width:100%;box-shadow:0 7px 15px #0000001a;background:#FFFFFF;padding:15px;z-index:999}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{margin-inline-end:1.5rem}"]}),t})()},9049:(O,C,i)=>{i.d(C,{S:()=>f});var e=i(7587),s=i(2921),n=i(3784),o=i(9808);class m{constructor(){this.Id=0,this.ProjectId=0,this.NameAr="",this.NameEn="",this.Address="",this.Longitude="",this.Latitude="",this.Phone="",this.Mobile=""}}var t=i(3075),d=i(4180);let p=(()=>{class h{constructor(){this.title="",this.addressTitle="",this.nameTitle="",this.partnerInfo=new m}ngOnInit(){this.partnerLocation={lat:this.partnerInfo.Latitude,lng:this.partnerInfo.Longitude,zoom:11.5}}}return h.\u0275fac=function(_){return new(_||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-partner-info"]],inputs:{title:"title",addressTitle:"addressTitle",nameTitle:"nameTitle",editable:"editable",partnerInfo:"partnerInfo"},decls:15,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"partner-map"],[3,"cityLocation"]],template:function(_,c){1&_&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"div",3)(6,"label",4),e._uU(7),e.qZA(),e.TgZ(8,"input",5),e.NdJ("ngModelChange",function(a){return c.partnerInfo.Address=a}),e.qZA()(),e.TgZ(9,"div",6),e._UZ(10,"app-maps",7),e.qZA(),e.TgZ(11,"div",3)(12,"label",4),e._uU(13),e.qZA(),e.TgZ(14,"input",5),e.NdJ("ngModelChange",function(a){return c.partnerInfo.NameAr=a}),e.qZA()()()()()),2&_&&(e.xp6(3),e.Oqu(c.title),e.xp6(4),e.Oqu(c.addressTitle),e.xp6(1),e.Q6J("ngModel",c.partnerInfo.Address)("disabled",!c.editable),e.xp6(2),e.Q6J("cityLocation",c.partnerLocation),e.xp6(3),e.Oqu(c.nameTitle),e.xp6(1),e.Q6J("ngModel",c.partnerInfo.NameAr)("disabled",!c.editable))},dependencies:[t.Fj,t.JJ,t.On,d.E],styles:["[_nghost-%COMP%]  .map-container{height:200px!important}"]}),h})();var v=i(7232);let b=(()=>{class h{constructor(){this.contactNumber="",this.updateContactNumber=new e.vpe}ngOnInit(){}setContactNumber(_){this.updateContactNumber.emit(_.toString())}}return h.\u0275fac=function(_){return new(_||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-contact-number"]],inputs:{editable:"editable",contactNumber:"contactNumber"},outputs:{updateContactNumber:"updateContactNumber"},decls:11,vars:11,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","placeholder","disabled","ngModelChange"]],template:function(_,c){1&_&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(a){return c.contactNumber=a})("ngModelChange",function(a){return c.setContactNumber(a)}),e.ALo(10,"translate"),e.qZA()()()()),2&_&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"admin_pages.pos_page.contacts")),e.xp6(4),e.Oqu(e.lcZ(8,7,"admin_pages.pos_page.contact_number")),e.xp6(2),e.s9C("placeholder",e.lcZ(10,9,"admin_pages.pos_page.contact_number_placeholder")),e.Q6J("ngModel",c.contactNumber)("disabled",!c.editable))},dependencies:[t.Fj,t.JJ,t.On,v.X$]}),h})();function M(h,u){if(1&h&&(e.TgZ(0,"div"),e._UZ(1,"app-partner-info",1)(2,"app-contact-number",2),e.qZA()),2&h){const _=e.oxw();e.xp6(1),e.Q6J("editable",!1)("title","\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u0631\u064a\u0643")("addressTitle","\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0634\u0631\u064a\u0643")("nameTitle","\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u064a\u0643")("partnerInfo",_.partnerInfo),e.xp6(1),e.Q6J("contactNumber",_.partnerInfo.Phone)("editable",!1)}}let f=(()=>{class h{constructor(_,c){this.route=_,this.partnerService=c,this.route.params.subscribe(r=>this.partnerId=r.id)}ngOnInit(){this.getPartnerInfo()}getPartnerInfo(){this.partnerService.getPartnerById(this.partnerId).subscribe(_=>{this.partnerInfo=_})}}return h.\u0275fac=function(_){return new(_||h)(e.Y36(s.gz),e.Y36(n.b))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-partner-page"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"editable","title","addressTitle","nameTitle","partnerInfo"],[3,"contactNumber","editable"]],template:function(_,c){1&_&&e.YNc(0,M,3,7,"div",0),2&_&&e.Q6J("ngIf",c.partnerInfo)},dependencies:[o.O5,p,b]}),h})()},8556:(O,C,i)=>{i.d(C,{e:()=>r});var e=i(5890);class s{constructor(){this.projectId=0,this.nameAr="",this.nameEn="",this.shortDescriptionAr="",this.shortDescriptionEn="",this.fullDescriptionAr="",this.fullDescriptionEn="",this.productCategoryId=1,this.price=0,this.canDelivered=!1,this.unitAr="",this.unitEn="",this.keywordslst=[],this.filelst=[]}}var n=i(8557),o=i(9353),m=i(2340),t=i(7587),d=i(2921),p=i(3560),v=i(9305),b=i(5349),M=i(8386),f=i(3075),h=i(9808),u=i(2652),_=i(7232);function c(a,l){if(1&a&&(t.TgZ(0,"div",8)(1,"div",27),t._UZ(2,"img",28),t.qZA()()),2&a){const g=l.$implicit;t.xp6(2),t.Q6J("src",g.url,t.LSH)("alt","")}}let r=(()=>{class a{constructor(g,A,P,T,E){this.route=g,this.productService=A,this.requestService=P,this.fileUploadService=T,this.userService=E,this.product=new s,this.showError=!1,this.currentRequest=new e.c,this.requestAvailable=!1,this.fileUploadList=[],this.imageAllowedExtensions=["jpeg","png","jpg"],this.host=m.N.hostUrl,this.route.params.subscribe(I=>this.projectId=I.projectId)}ngOnInit(){console.log(this.projectId),this.getCurrentRequest()}getCurrentRequest(){this.requestService.getProjectOpenRequests(this.projectId).subscribe(g=>{0==g.Rows.length?this.requestAvailable=!1:(this.currentRequest=g.Rows[0],this.requestAvailable=!0)})}setDeliveryOption(g){this.product.canDelivered=g}saveChanges(){this.validateProduct()?(this.product.shortDescriptionAr=this.product.fullDescriptionAr,this.product.projectId=this.projectId,this.product.nameEn=this.product.nameAr,this.product.fullDescriptionEn=this.product.fullDescriptionAr,this.product.filelst=this.fileUploadList,"CLIENT"==this.userService.getUserRole()?this.createProductForClientUser():this.createProductForAdminUser()):alert("Invalid form!")}createProductForClientUser(){this.requestAvailable?this.createProductRequest():this.createUpdateRequest()}createProductForAdminUser(){console.log(this.product),this.productService.saveProduct(this.product).subscribe(g=>{window.location.href="/admin/projects/"+this.projectId})}createUpdateRequest(){this.requestService.createProjectUpdateRequest(this.projectId).subscribe(g=>{this.currentRequest=g,this.createProductRequest()})}createProductRequest(){this.requestService.createProductRequest(this.currentRequest.RelatedProjectVersionId,this.product).subscribe(g=>{if(this.product.filelst.length>0)for(let A of this.product.filelst)this.requestService.createProductAttachment(g.Id,A).subscribe(P=>{});window.location.href="/client/profile"})}validateProduct(){return!!this.product.nameAr}uploadFile(g){const A=g.target.files;!A||!A.length||!o.g.isValidFileExtension(A[0],this.imageAllowedExtensions)||this.fileUploadService.uploadFile(A).subscribe({next:P=>{if(P){let T=this.prepareFileUploadObject(A[0],P);this.fileUploadList.push(T)}},error:P=>console.log(P)})}prepareFileUploadObject(g,A){const P=new n.p;return P.isBrochour=!1,P.isExternal=!0,P.name=g.name,P.fileType=g.type,P.url=A,P}cancelChanges(){"ADMIN"==this.userService.getUserRole()?window.location.href="/admin":window.location.href="/client/profile"}}return a.\u0275fac=function(g){return new(g||a)(t.Y36(d.gz),t.Y36(p.M),t.Y36(v.s),t.Y36(b.I),t.Y36(M.K))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-product"]],decls:76,vars:47,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col"],[1,"mb-4"],[1,"form-label"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6"],["type","file","id","upload-photo","accept","image/png, image/jpeg, image/jpg",3,"change"],["for","upload-photo",1,"add-new-img"],[1,"wrapper"],[1,"icon-add"],[1,"row","mb-3"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["rows","5",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","g-3","gy-4"],[1,"col-sm-6"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"media-card","align-items-center"],[1,"flex-shrink-0","ms-3"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","option1",1,"form-check-input",3,"change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","option2",1,"form-check-input",3,"change"],["for","inlineRadio2",1,"form-check-label"],[3,"saveChanges","cancelChanges"],[1,"project-img-wrapper"],[3,"src","alt"]],template:function(g,A){1&g&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",5)(8,"label",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",3),t.YNc(12,c,3,2,"div",7),t.TgZ(13,"div",8)(14,"input",9),t.NdJ("change",function(T){return A.uploadFile(T)}),t.qZA(),t.TgZ(15,"label",10)(16,"div",11),t._UZ(17,"span",12),t._uU(18),t.ALo(19,"translate"),t.qZA()()()()(),t.TgZ(20,"div")(21,"div",13)(22,"div",4)(23,"label",6),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"input",14),t.NdJ("ngModelChange",function(T){return A.product.nameAr=T}),t.qZA()()(),t.TgZ(27,"div",13)(28,"div",4)(29,"label",6),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"textarea",15),t.NdJ("ngModelChange",function(T){return A.product.fullDescriptionAr=T}),t.qZA()()()()()(),t.TgZ(33,"div",0)(34,"div",1)(35,"div",2)(36,"div",3)(37,"div",4),t._uU(38),t.ALo(39,"translate"),t.qZA()()(),t.TgZ(40,"label",6),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",16)(44,"div",17)(45,"label",6),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"input",18),t.NdJ("ngModelChange",function(T){return A.product.unitAr=T}),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"label",6),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"input",18),t.NdJ("ngModelChange",function(T){return A.product.price=T}),t.ALo(55,"translate"),t.qZA()()()()(),t.TgZ(56,"div",0)(57,"div",1)(58,"div",2)(59,"div",3)(60,"div",4),t._uU(61),t.ALo(62,"translate"),t.qZA()()(),t.TgZ(63,"div",19)(64,"div",20)(65,"div",21)(66,"input",22),t.NdJ("change",function(){return A.setDeliveryOption(!0)}),t.qZA(),t.TgZ(67,"label",23),t._uU(68),t.ALo(69,"translate"),t.qZA()(),t.TgZ(70,"div",21)(71,"input",24),t.NdJ("change",function(){return A.setDeliveryOption(!1)}),t.qZA(),t.TgZ(72,"label",25),t._uU(73),t.ALo(74,"translate"),t.qZA()()()()()(),t.TgZ(75,"app-page-action-buttons",26),t.NdJ("saveChanges",function(){return A.saveChanges()})("cancelChanges",function(){return A.cancelChanges()}),t.qZA()),2&g&&(t.xp6(5),t.Oqu(t.lcZ(6,19,"client_pages.product_page.product_info")),t.xp6(4),t.Oqu(t.lcZ(10,21,"client_pages.product_page.product_images")),t.xp6(3),t.Q6J("ngForOf",A.fileUploadList),t.xp6(6),t.hij(" ",t.lcZ(19,23,"global.add_new_image")," "),t.xp6(6),t.Oqu(t.lcZ(25,25,"client_pages.product_page.product_name_arabic")),t.xp6(2),t.Q6J("ngModel",A.product.nameAr),t.xp6(4),t.Oqu(t.lcZ(31,27,"client_pages.product_page.product_description_arabic")),t.xp6(2),t.Q6J("ngModel",A.product.fullDescriptionAr),t.xp6(6),t.Oqu(t.lcZ(39,29,"client_pages.product_page.product_price")),t.xp6(3),t.Oqu(t.lcZ(42,31,"client_pages.product_page.main_product_price")),t.xp6(5),t.Oqu(t.lcZ(47,33,"client_pages.product_page.unit_arabic")),t.xp6(2),t.s9C("placeholder",t.lcZ(49,35,"client_pages.product_page.unit_arabic_placeholder")),t.Q6J("ngModel",A.product.unitAr),t.xp6(4),t.Oqu(t.lcZ(53,37,"client_pages.product_page.price")),t.xp6(2),t.s9C("placeholder",t.lcZ(55,39,"client_pages.product_page.price_placeholder")),t.Q6J("ngModel",A.product.price),t.xp6(7),t.Oqu(t.lcZ(62,41,"delivery_options")),t.xp6(7),t.Oqu(t.lcZ(69,43,"global.available")),t.xp6(5),t.Oqu(t.lcZ(74,45,"global.not_available")))},dependencies:[f.Fj,f.JJ,f.On,h.sg,u.l,_.X$],styles:[".project-img-wrapper[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:1px solid #eef2f3;height:100%;display:flex;justify-content:center;align-items:center}.project-img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75%;max-height:150px}.add-new-img[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:solid 1px #eef2f3;height:100%;display:flex;justify-content:center;align-items:center;cursor:pointer}.add-new-img[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{border:3px solid #eef2f3;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.add-new-img[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{font-size:3rem;color:#a2b3be;margin-bottom:.5rem}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),a})()},2643:(O,C,i)=>{i.d(C,{P:()=>f});var e=i(2340),s=i(7587),n=i(2921),o=i(8386),m=i(3560),t=i(9808),d=i(7232);const p=function(h){return["/client/products",h]};function v(h,u){if(1&h){const _=s.EpF();s.TgZ(0,"div",8)(1,"a",9)(2,"div",10)(3,"div",11),s._UZ(4,"img",12),s.TgZ(5,"button",13),s.NdJ("click",function(){const r=s.CHM(_),a=r.$implicit,l=r.index,g=s.oxw();return s.KtG(g.deleteProduct(a,l))}),s._UZ(6,"span",14),s.qZA()(),s.TgZ(7,"h4",15),s._uU(8),s.qZA()()()()}if(2&h){const _=u.$implicit,c=s.oxw();s.xp6(4),s.Q6J("src",c.host+"/"+(null==_.Attachmentlst[0]?null:_.Attachmentlst[0].Url),s.LSH)("alt","")("routerLink",s.VKq(4,p,_.Id)),s.xp6(4),s.Oqu(_.nameAr)}}const b=function(h){return[h]};function M(h,u){if(1&h&&(s.TgZ(0,"div",8)(1,"div",16)(2,"div",17),s._UZ(3,"span",18),s.qZA(),s.TgZ(4,"h4",15),s._uU(5),s.ALo(6,"translate"),s.qZA()()()),2&h){const _=s.oxw();s.xp6(1),s.Q6J("routerLink",s.VKq(4,b,"ADMIN"===_.currentRole?"/admin/projects/"+_.project.projectId+"/add-product":"/client/projects/"+_.project.projectId+"/add-product")),s.xp6(4),s.Oqu(s.lcZ(6,2,"client_pages.company_profile_page.add_new_product"))}}let f=(()=>{class h{constructor(_,c,r){this.route=_,this.userService=c,this.productService=r,this.currentRole="",this.host=e.N.hostUrl,this.route.params.subscribe(a=>this.projectId=Number(a.id)),this.currentRole=this.userService.getUserRole()}ngOnInit(){console.log(this.project.products)}deleteProduct(_,c){this.productService.deleteProduct(_.Id).subscribe(),this.project.products.splice(c,1)}}return h.\u0275fac=function(_){return new(_||h)(s.Y36(n.gz),s.Y36(o.K),s.Y36(m.M))},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-products"]],inputs:{project:"project",editable:"editable"},decls:13,vars:5,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col"],[1,"card-title"],[1,"mb-4"],["class","col-md-3 col-sm-4",4,"ngFor","ngForOf"],["class","col-md-3 col-sm-4",4,"ngIf"],[1,"col-md-3","col-sm-4"],[1,"box-link"],[1,"product-container"],[1,"product-img-wrapper"],[3,"src","alt","routerLink"],[1,"btn","btn-danger","delete-icon-btn",3,"click"],[1,"icon-delete"],[1,"product-title"],[1,"add-new-img",3,"routerLink"],[1,"wrapper"],[1,"icon-add"]],template:function(_,c){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",2)(6,"div",3),s._uU(7),s.ALo(8,"translate"),s.qZA()()()()(),s.TgZ(9,"div",5)(10,"div",2),s.YNc(11,v,9,6,"div",6),s.YNc(12,M,7,6,"div",7),s.qZA()()()()),2&_&&(s.xp6(7),s.hij(" ",s.lcZ(8,3,"client_pages.company_profile_page.project_products")," "),s.xp6(4),s.Q6J("ngForOf",c.project.products),s.xp6(1),s.Q6J("ngIf","VISITOR"!==c.currentRole))},dependencies:[t.sg,t.O5,n.rH,d.X$],styles:[".product-container[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:1px solid #eef2f3;height:100%}.product-img-wrapper[_ngcontent-%COMP%]{min-height:200px;display:flex;margin-bottom:.75rem;justify-content:center;align-items:center;position:relative}.product-img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%;max-height:100%;border-radius:2rem;border-end-end-radius:0;border:10px solid #eef2f3}.product-img-wrapper[_ngcontent-%COMP%]   .delete-icon-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem}[dir=ltr][_ngcontent-%COMP%]   .product-img-wrapper[_ngcontent-%COMP%]   .delete-icon-btn[_ngcontent-%COMP%]{left:auto;right:.5rem}.product-title[_ngcontent-%COMP%]{font-size:1.25rem;color:#163d61;text-align:center}.add-new-img[_ngcontent-%COMP%]{padding:.5rem;border-radius:7px;border:solid 1px #eef2f3;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.add-new-img[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{border:10px solid #eef2f3;height:100%;width:100%;padding:1rem;display:flex;justify-content:center;align-items:center;border-radius:2rem;border-end-end-radius:0;margin-bottom:.75rem}.add-new-img[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{font-size:3rem;color:#a2b3be}input[type=file][_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.media-card[_ngcontent-%COMP%]   .media-icon[_ngcontent-%COMP%]{font-size:2rem}"]}),h})()},5250:(O,C,i)=>{i.d(C,{V:()=>M});var e=i(7587),s=i(954),n=i(520),o=i(8386);let m=(()=>{class f{constructor(u,_){this.http=u,this.userService=_,this.sideBarList=[],this.currentRole=this.userService.getUserRole()}getSideBarItems(){return this.currentRole==s.H.CLIENT.toString()?this.sideBarList=[{title:"companyProfile",route:["profile"]},{title:"reactiveMap",route:["map"]},{title:"partners",route:["partners"]}]:this.currentRole==s.H.ADMIN.toString()&&(this.sideBarList=[{title:"mainPage",route:["home"]},{title:"projects",route:["projects"]},{title:"bank-partners",route:["partners"]},{title:"branches",route:["branches"]},{title:"lookupManagement",route:["management"]},{title:"comments",route:["comments"]},{title:"editRequests",route:["edit-requests"]}]),this.sideBarList}}return f.\u0275fac=function(u){return new(u||f)(e.LFG(n.eN),e.LFG(o.K))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();var t=i(9808),d=i(2921),p=i(7232);const v=function(){return{exact:!0}};function b(f,h){if(1&f&&(e.TgZ(0,"li")(1,"a",2),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&f){const u=h.$implicit;e.xp6(1),e.Q6J("routerLink",u.route)("routerLinkActiveOptions",e.DdM(5,v)),e.xp6(1),e.Oqu(e.lcZ(3,3,u.title))}}let M=(()=>{class f{constructor(u){this.sideBarService=u}ngOnInit(){this.sidebarList=this.sideBarService.getSideBarItems()}}return f.\u0275fac=function(u){return new(u||f)(e.Y36(m))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sidebar-menu"]],decls:3,vars:1,consts:[[1,"side-menu"],[4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"]],template:function(u,_){1&u&&(e.TgZ(0,"aside")(1,"ul",0),e.YNc(2,b,4,6,"li",1),e.qZA()()),2&u&&(e.xp6(2),e.Q6J("ngForOf",_.sidebarList))},dependencies:[t.sg,d.yS,d.Od,p.X$],styles:["aside[_ngcontent-%COMP%]{position:sticky;top:120px;display:flex;flex-direction:column;height:calc(100vh - 120px)}.side-menu[_ngcontent-%COMP%]{background:#FFFFFF;padding:16px;margin:0 0 100px;height:100%;flex-grow:1;border-end-end-radius:10px;font-weight:500}.side-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:10px}.side-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.side-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#163d61;padding:15px;text-decoration:none;display:block;font-size:1rem}.side-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#19aec8;border-radius:5px;color:#fff}"]}),f})()},8557:(O,C,i)=>{i.d(C,{p:()=>e});class e{constructor(){this.name="",this.url="",this.fileType="",this.isBrochour=!1,this.isExternal=!1}}},5890:(O,C,i)=>{i.d(C,{c:()=>e});class e{constructor(){this.Id=0,this.ProjectId=0,this.CreatedDate=new Date,this.CreatedBy="",this.ApprovalStatusEnum=0,this.RelatedProjectVersionId=0,this.ApprovalStatusRecord=new s}}class s{constructor(){this.Id=0,this.NameAr="",this.NameEn=""}}},4402:(O,C,i)=>{i.d(C,{h:()=>e});class e{constructor(n,o){this.title=n,this.value=o}}},7480:(O,C,i)=>{i.d(C,{L:()=>o});var e=i(5047),s=i(7587),n=i(520);let o=(()=>{class m{constructor(d){this.http=d}getRequestAttachments(d){let p=e.s.REQUEST_ATTACHMENTS.replace("{requestId}",d+"");return this.http.get(p)}}return m.\u0275fac=function(d){return new(d||m)(s.LFG(n.eN))},m.\u0275prov=s.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5349:(O,C,i)=>{i.d(C,{I:()=>o});var e=i(5047),s=i(7587),n=i(520);let o=(()=>{class m{constructor(d){this.http=d}uploadFile(d){let p=e.s.FILE_UPLOAD;const v=new FormData;return v.append("_file",d[0]),this.http.post(p,v)}}return m.\u0275fac=function(d){return new(d||m)(s.LFG(n.eN))},m.\u0275prov=s.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},3784:(O,C,i)=>{i.d(C,{b:()=>o});var e=i(520),s=i(5047),n=i(7587);let o=(()=>{class m{constructor(d){this.http=d}getBankPartners(){return this.http.get(s.s.PARTNERS_INFO)}getPartners(d){let p=s.s.PARTNERS_INFO,v=new e.LE;return v=v.append("ProjectId",d),this.http.get(p,{params:v})}getPartnerById(d){let p=s.s.PARTNER_INFO.replace("{partnerId}",d+"");return this.http.get(p)}addNewPartner(d){return this.http.post(s.s.PARTNER_CREATION_URL,d)}}return m.\u0275fac=function(d){return new(d||m)(n.LFG(e.eN))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},3560:(O,C,i)=>{i.d(C,{M:()=>o});var e=i(5047),s=i(7587),n=i(520);let o=(()=>{class m{constructor(d){this.http=d}getProductById(d){let p=e.s.PRODUCT_INFO.replace("{productId}",d+"");return this.http.get(p)}saveProduct(d){return this.http.post(e.s.PRODUCT_CREATION_URL,d)}deleteProduct(d){let p=e.s.PRODUCT_DELETE_URL.replace("{productId}",d+"");return this.http.delete(p)}}return m.\u0275fac=function(d){return new(d||m)(s.LFG(n.eN))},m.\u0275prov=s.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},9305:(O,C,i)=>{i.d(C,{s:()=>o});var e=i(520),s=i(5047),n=i(7587);let o=(()=>{class m{constructor(d){this.http=d}getRequests(){return this.http.get(s.s.EDIT_REQUESTS)}getRequestDetails(d){let p=s.s.EDIT_REQUEST.replace("{versionId}",d+""),v=new e.LE;return v=v.append("hasChangesOnly",!0),this.http.get(p,{params:v})}createProjectChange(d,p){let v=s.s.CREATE_PROJECT_CHANGE.replace("{requestId}",p);return this.http.post(v,d)}getProjectOpenRequests(d){let p=s.s.PROJECT_OPEN_REQUEST_URL.replace("{projectId}",d+"");return this.http.get(p)}createProjectUpdateRequest(d){let p=s.s.PROJECT_REQUEST_CREATE.replace("{projectId}",d+"");return this.http.post(p,d)}createProductRequest(d,p){let v=s.s.PRODUCT_REQUEST_CREATE.replace("{requestId}",d);return this.http.post(v,p)}createProductAttachment(d,p){let v=s.s.PRODUCT_ATTACHMENT_REQUEST.replace("{productVersionId}",d);return this.http.post(v,p)}createBranchRequest(d,p){let v=s.s.BRANCH_REQUEST_CREATE.replace("{requestId}",d);return this.http.post(v,p)}createAttachmentRequest(d,p){let v=s.s.ATTACHMENT_REQUEST_CREATE.replace("{requestId}",d);return this.http.post(v,p)}sendProjectRequestForApproval(d){let p=s.s.PROJECT_REQUEST_SEND_FOR_APPROVAL.replace("{requestId}",d);return this.http.post(p,{})}deleteAttachment(d,p){let v=s.s.PROJECT_DELETE_ATTACHMENT.replace("{requestId}",d);return v=v.replace("{attachmentId}",p),this.http.delete(v)}approveRequest(d){let p=s.s.APPROVE_REQUEST.replace("{requestId}",d);return this.http.post(p,["Approve"])}rejectRequest(d){let p=s.s.REJECT_REQUEST.replace("{requestId}",d);return this.http.post(p,["Reject"])}}return m.\u0275fac=function(d){return new(d||m)(n.LFG(e.eN))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},9353:(O,C,i)=>{i.d(C,{g:()=>e});class e{constructor(){}static isValidFileExtension(n,o){const m=this.getFileExtension(n.name);return!!(m&&o.indexOf(m)>-1)}static getFileExtension(n){var o;return-1===n.indexOf(".")?null:null===(o=n.split(".").pop())||void 0===o?void 0:o.toLowerCase()}}}}]);